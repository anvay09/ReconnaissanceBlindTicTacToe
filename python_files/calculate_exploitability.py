from python_files.rbt_classes import *
from python_files.rbt_utilties import *
import argparse
import os

if __name__ == '__main__':
    parser = argparse.ArgumentParser()
    parser.add_argument('--PolicyFileX', type=str, required=True)
    parser.add_argument('--PolicyFileO', type=str, required=True)
    parser.add_argument('--BRx', type=str, help='Best response against PolicyFileX')
    parser.add_argument('--BRo', type=str, help='Best response against PolicyFileO')
    arguments = parser.parse_args()

    exploitability = 0

    os.run("./evaluate_policy " + arguments.PolicyFileX + " " + arguments.BRx)
    exploitability += float(os.read("expected_utility.txt"))
    os.remove("expected_utility.txt")
    
    os.run("./evaluate_policy " + arguments.BRo + " " + arguments.PolicyFileO)
    exploitability += float(os.read("expected_utility.txt"))
    os.remove("expected_utility.txt")

    exploitability /= 2
    print(exploitability)

    